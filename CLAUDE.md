# CLAUDE.md

## 프로젝트 개요 (필수)
- 프로젝트명: `Scrapme`
- 목표: 웹에서 수집한 이미지를 한 페이지에 자유롭게 배치해 개인 스크랩북을 만드는 서비스
- 핵심 가치:
  - 자유 배치(드래그/회전/리사이즈)
  - 감성적인 꾸미기(배경/스티커/텍스트)
  - 개인 아카이브 저장

## 현재 구조 (필수)
- 루트 폴더: `Scrapme`
- 실제 웹앱 경로: `scrapme-web`
- 문서:
  - 요구사항 초안: `project.md`
  - 본 문서: `CLAUDE.md`

## 확정 기술 스택 (필수)
- 프레임워크: `Next.js` (App Router, TypeScript)
- UI: `React`, `Tailwind CSS`
- 캔버스 에디터: `react-konva`, `konva`
- 패키지 매니저: `npm`
- 런타임 기준: 웹 우선 (모바일/데스크톱은 추후)

## 디자인/프론트엔드 원칙 (필수)
- 랜딩은 템플릿 느낌이 아닌 브랜드 톤을 유지한다.
- 기본 목표:
  - 명확한 비주얼 방향(색, 타이포, 무드)
  - 단순 카드 나열보다 스토리 흐름(히어로 -> 기능 -> CTA)
  - 데스크톱/모바일 모두 정상 표시
- 현재 랜딩 구현 파일:
  - `scrapme-web/src/app/page.tsx`
  - `scrapme-web/src/app/globals.css`
  - `scrapme-web/src/app/layout.tsx`

## 개발 원칙 (필수)
- 우선순위는 `MVP 동작` -> `디자인 고도화` 순서.
- 큰 변경 전에는 영향 파일을 먼저 확인한다.
- 변경 후에는 최소 `npm run lint`로 검증한다.
- 기능 추가 시 하드코딩보다 확장 가능한 데이터 구조를 우선한다.
- 한 번에 큰 기능을 넣지 않고 `기능 1개 -> 함수 단위 구현 -> 즉시 검증` 순서로 진행한다.

## 작업 단계 분류 (대분류/소분류)
1. Foundation
   - F1. 라우트/레이아웃 안정화
   - F2. 공통 타입/상수 구조 정의
   - F3. 환경변수(.env) 규칙 확정
2. Landing + Waitlist
   - L1. 랜딩 페이지 복구/유지
   - L2. Waitlist 폼 UI
   - L3. Waitlist API 라우트
   - L4. Supabase 저장 연동
3. Editor Core MVP
   - E1. 이미지 업로드
   - E2. 캔버스 배치/이동
   - E3. 리사이즈/회전(Transformer)
   - E4. 선택/삭제/레이어 순서
4. Board Persistence
   - P1. 보드 직렬화(JSON) 함수
   - P2. 로컬 저장/불러오기
   - P3. Supabase 보드 저장/불러오기
5. Polish
   - Q1. 에러 처리/토스트
   - Q2. 접근성/반응형
   - Q3. 성능 점검(이미지 크기/렌더링)

## 기능별 구현 규칙 (필수)
- 각 소분류는 아래 순서로만 진행:
1. 요구사항 1문장 정의
2. 파일/함수 영향 범위 확정
3. 함수 단위 구현
4. 함수 단위 수동 테스트
5. `npm run lint` 검증
6. 완료 체크 후 다음 소분류로 이동

## 함수 단위 체크리스트 템플릿
- 기능 ID: `예) L3`
- 함수/핸들러명:
- 입력:
- 출력:
- 실패 케이스:
- 구현 파일:
- 테스트 방법:
- 테스트 결과:

## 현재 우선순위 백로그 (실행 순서 고정)
1. `L1` 랜딩 페이지 파일 복구 (`src/app/page.tsx`)
2. `L2` Waitlist 폼 컴포넌트 추가
3. `L3` `/api/waitlist` POST 라우트 추가
4. `L4` Supabase insert 연동
5. `E1` 에디터 이미지 업로드
6. `E2` 드래그 배치
7. `E3` 리사이즈/회전
8. `P2` 로컬 저장/불러오기

## 완료 기준 (MVP Definition of Done)
- 랜딩에서 이메일 제출 시 DB에 저장된다.
- 에디터에서 이미지를 업로드하고 자유 배치/회전/리사이즈할 수 있다.
- 보드를 저장 후 다시 불러올 수 있다(최소 로컬 저장).
- 주요 경로(`/`, `/editor`)가 정상 렌더링된다.
- `npm run lint` 통과 상태를 유지한다.

## 커뮤니케이션 규칙 (필수)
- 진행은 한국어로 간결하게 공유한다.
- 결정이 필요한 경우, 선택지와 권장안을 함께 제시한다.
- 불확실한 내용은 가정으로 명시하고 확인 후 진행한다.
